<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>EZ-SEC Docs</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Responsive navbar-->
    <div class="d-flex" id="wrapper">
      <!-- Sidebar-->
      <div class="border-end bg-white" id="sidebar-wrapper">
        <div class="sidebar-heading border-bottom bg-light">Documentation</div>
        <div class="list-group list-group-flush">
          <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#about"
            >Getting Started</a
          >
          <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"
            >Shortcuts</a
          >
          <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"
            >Overview</a
          >
          <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"
            >Events</a
          >
          <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"
            >Profile</a
          >
          <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!"
            >Status</a
          >
        </div>
      </div>
      <!-- Page content wrapper-->
      <div id="page-content-wrapper">
        <!-- Top navigation-->
        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
          <div class="container-fluid">
            <button class="btn btn-primary" id="sidebarToggle">Toggle Menu</button>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                <li class="nav-item active"><a class="nav-link" href="#!">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="#!">Link</a></li>
                <li class="nav-item dropdown">
                  <a
                    class="nav-link dropdown-toggle"
                    id="navbarDropdown"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                    >Dropdown</a
                  >
                  <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="#!">Action</a>
                    <a class="dropdown-item" href="#!">Another action</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#!">Something else here</a>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </nav>
        <!-- Page content-->
        <section id="about">
          <div class="container-fluid">
            <h1 class="mt-4">Introduction</h1>
            <ol class="breadcrumb mb-4 m-1">
              <li class="breadcrumb-item active">Getting started with EZ-SEC</li>
            </ol>
            <h2 class="mt-3">Making a request to grab a 13F filing</h2>
            <p class="lead" style="font-size: 1.5rem">
              &nbsp; &nbsp; &nbsp; &nbsp;EZ-SEC is an api built on top of Edgar API. It is a simple and easy to use api that
                allows you to get the latest SEC filings for any company. It also allows you to get the latest news for any
                company. It is a great tool for anyone who wants to get the latest SEC filings and news for any company.

            </p>
        
          </div>
        </section>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link href="/css/prism.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container mt-5">
    <div class="box">
      <pre>
        <code class="language-html">
          &lt;form id="my-form"&gt;
            &lt;div class="form-group"&gt;
              &lt;label for="inputMessage"&gt;Try it yourself:&lt;/label&gt;
              &lt;textarea class="form-control" id="inputMessage" name="message" rows="3" placeholder="Enter your message"&gt;&lt;/textarea&gt;
            &lt;/div&gt;
            &lt;button type="submit" class="btn btn-success" &gt;Run&lt;/button&gt;
          &lt;/form&gt;
          &lt;div class="d-flex p-2"&gt; &lt;div id="codeReturn" class="d-flex flex-row align-items-center mb-4"&gt;&lt;/div&gt;&lt;/div&gt;
        </code>
      </pre>
    </div>
    </div>

    <div class="container mt-5">
      <h1>Code Example</h1>
      <form id="my-form">
        <div class="form-group">
          
          <label for="inputMessage">Try it yourself:</label>
          <textarea class="form-control" id="inputMessage" name="message" rows="3" placeholder="Enter your message"></textarea>
        </div>
        <button type="submit" class="btn btn-success" >Run</button>
      </form>
      <div class="container mt-5">
        <div class="box">
     <div id="codeReturn" class="d-flex flex-row align-items-center mb-4"></div>
     </div>
     </div>
     
        
        
      </div>
    </div>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const display = document.querySelector("#codeReturn");
        const form = document.getElementById('my-form');
        form.addEventListener('submit', async (event) => {
          event.preventDefault();
          const formData = new FormData(form);
          userCode = formData.get('message');
          display.textContent = "";
          try {
            const res = await fetch('/api/auth/execute', {
              method: 'POST',
              body: JSON.stringify({
                message: userCode,
              }),
            headers: { "Content-Type": "application/json" },
            });
            const result = await res.json();
            if (res.status === 200 || res.status === 201 || res.status === 500) {
                return (display.textContent = `Your result: ${JSON.stringify(result.userCodeReturn)}`);
              }
            console.log('success');
            console.log("this is the result: " +JSON.stringify(result));
          } catch (err) {
            console.error(err);
          }
        });
    </script>
    <script src="/js/prism.js"></script>
  </body>
</html>
